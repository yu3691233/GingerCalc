# 生姜经营计算器

这是一个专为生姜种植和销售行业设计的计算工具，帮助生姜经营者计算利润、损耗和销售数据。

## 项目概述

- 版本: 3.0.1
- 开发者: 余恒伟
- 联系方式: 121297290@qq.com

## 主要功能

1. 计算模式
   - 损耗分析
   - 销售总价
   - 利润核算

2. 输入参数
   - 出货箱数
   - 实际出货件数
   - 洗姜重量
   - 销售单价
   - 原箱净重成本
   - 加工费用
   - 其他支出比例

3. 显示模式
   - 简洁模式：仅显示计算结果
   - 详细模式：显示计算公式和过程

4. 历史记录功能
   - 按日期分组显示
   - 默认显示最近3条
   - 其他记录折叠显示
   - 支持搜索功能
   - 支持添加备注
   - 支持批量删除
   - 点击记录可复制
   - 点击参数可重新计算

5. 设置功能
   - 默认值设置
   - 显示选项设置
   - 复制选项设置

## 开发步骤

1. 基础框架搭建
   - 创建 HTML 结构
   - 设置响应式样式
   - 实现基本计算逻辑

2. 计算功能实现
   - 损耗分析计算
   - 销售总价计算
   - 利润核算计算
   - 自动计算加工费

3. 用户界面优化
   - 添加简洁/详细模式切换
   - 实现公式显示/隐藏
   - 添加复制结果功能
   - 优化移动端显示

4. 历史记录功能
   - 实现记录保存
   - 按日期分组显示
   - 添加搜索功能
   - 实现备注功能
   - 添加批量删除
   - 添加参数重用功能

5. 设置系统
   - 实现默认值设置
   - 添加显示选项设置
   - 添加复制选项设置
   - 数据本地存储

## 技术实现

1. 数据存储
   - 使用 localStorage 存储设置和历史记录
   - 实现数据持久化

2. 计算逻辑
   - 单位换算（斤转吨）
   - 损耗率计算
   - 利润率计算
   - 加工费自动计算

3. 用户界面
   - 响应式设计
   - CSS Grid 和 Flexbox 布局
   - 动画效果
   - 移动端优化

4. 交互优化
   - 实时计算
   - 表单验证
   - 错误提示
   - 操作反馈

## 项目结构

## 在线体验
- 访问地址：[待部署]
- 支持PC端和移动端访问
- 支持离线使用（PWA）

## 主要特性
1. 三种计算模式：
   - 损耗分析：计算毛重/净重损耗率
   - 销售总价：计算预期销售总额
   - 利润核算：计算经营利润和利润率

2. 两种销售类型：
   - 泥姜：带包装销售，每件50斤
   - 洗姜：净重销售，重量可配置

3. 智能计算：
   - 自动计算加工费（可配置单价）
   - 保底金额保护
   - 支持手动修改覆盖

4. 界面优化：
   - 简洁/详细模式切换
   - 公式计算过程展示
   - 一键复制计算结果
   - 响应式布局设计

## 使用说明

### 基础操作
1. 选择计算模式
2. 选择销售类型
3. 输入相关数据
4. 点击"开始计算"
5. 查看计算结果

### 高级功能
1. 默认值设置：
   - 点击⚙️按钮进入设置
   - 修改默认参数
   - 点击保存或恢复默认

2. 模式切换：
   - 点击📱按钮切换显示模式
   - 简洁模式：仅显示数值结果
   - 详细模式：显示计算过程

3. 结果复制：
   - 计算后显示复制按钮
   - 点击一键复制结果
   - 自动恢复按钮状态

## 技术栈
- 原生JavaScript (ES6+)
- HTML5 + CSS3
- LocalStorage数据持久化
- 响应式设计

## 本地开发
1. 克隆项目：
   ```bash
   git clone [项目地址]
   ```

2. 运行项目：
   - 使用任意HTTP服务器
   - 或直接打开index.html

3. 开发建议：
   - 使用Chrome最新版本
   - 建议清除缓存后测试
   - 注意移动端适配

## 更新日志

### v1.0.0 (2024-03-xx)
- 完整实现三种计算模式
- 支持简洁/详细模式切换
- 添加默认值设置功能
- 优化移动端显示效果
- 添加一键复制功能

## 注意事项
- 首次访问默认使用简洁模式
- 加工费自动计算可手动覆盖
- 建议使用Chrome浏览器访问
- 数据实时保存在本地存储中

## 维护者
[您的名字/组织]

## 许可证
MIT License

## 功能模块

### 1. 损耗分析模式
- 输出变更：
  - 理论采购量 → 净重采购量
  - 新增毛重采购量
- 计算逻辑：
  - 毛重采购量 = 采购箱数 × 50斤/箱 ÷ 2000斤/吨
  - 净重采购量 = 采购箱数 × 47.04斤/箱 ÷ 2000斤/吨
  - 损耗率 = (净重采购量 - 实际出货量) ÷ 净重采购量 × 100%

### 2. 销售总价模式
- 计算逻辑：
  - 销售总额 = 实际出货量 × 销售单价
- 显示优化：
  - 增加货币单位(¥)
  - 保留2位小数

### 3. 利润核算模式
- 计算公式变更：
  - 销售利润率 = 预估利润 / 销售总额 × 100%
- 显示优化：
  - 所有金额值增加货币单位
  - 增加计算公式的文字说明
- 输出结果新增：
  - 总成本（采购成本+附加成本）

## 界面功能

### 1. 模式切换
- 简洁/详细模式切换
  - 简洁模式：隐藏说明文字
  - 详细模式：显示计算公式和说明
- 首次加载默认简洁模式
- 模式状态本地存储

### 2. 默认设置
- 可配置项：
  - 默认出库箱数
  - 洗姜每件重量
  - 最低加工费
  - 销售单价
  - 每箱采购价
  - 其他支出占比
  - 加工费单价
  - 加工费用
- 设置本地存储
- 一键恢复默认值

### 3. 复制结果功能
- 计算后显示复制按钮
- 点击复制全部结果
- 复制成功提示
- 3秒后自动恢复布局

### 4. 输入说明
- 动态显示模式说明
- 销售类型说明
- 输入框提示信息
- 计算公式说明

### 5. 响应式布局
- 移动端适配
- 按钮布局优化
- 表单控件自适应

## 样式优化

### 1. 基础样式
- 字体：Arial, sans-serif
- 主题色：#3498db
- 圆角：6-12px
- 阴影效果
- 间距统一

### 2. 交互优化
- 按钮悬停效果
- 输入框聚焦样式
- 提示信息动画
- 模式切换指示

### 3. 结果展示
- 分组显示
- 重要数据高亮
- 公式说明缩进
- 货币单位统一

## 本地存储
- 用户输入值
- 模式选择
- 默认设置
- 首次访问标记

## 开发说明
1. 克隆项目后需清除浏览器缓存
2. 建议使用Chrome最新版本
3. 支持PWA离线使用
4. 代码采用ES6+标准

## 打包说明

### Android打包步骤
1. 使用HBuilder打开项目
2. 云打包配置：
   - 应用名称：生姜经营计算系统
   - 包名：com.ginger.calc
   - 版本号：1.0.0
   - 版本名称：1.0.0
   - 图标：自定义应用图标

3. manifest.json配置：
```json
{
  "name": "生姜经营计算系统",
  "short_name": "生姜计算",
  "description": "专业的生姜经营计算工具",
  "version": {
    "name": "1.0.0",
    "code": 100
  },
  "app-plus": {
    "statusbar": {
      "immersed": true
    },
    "splashscreen": {
      "waiting": true
    }
  }
}
```

4. 打包注意事项：
   - 确保所有资源文件正确引用
   - 测试移动端兼容性
   - 检查网络权限配置
   - 验证本地存储功能 